{% extends 'base.html' %}
{% block content %}
<div class="card p-4 mb-4">
    <h5>Cadastrar Novo Modelo</h5>
    <form method="post">
      <div class="row">
        <div class="col-md-3">
          <label>Marca</label>
          <input type="text" class="form-control" name="marca" required>
        </div>
        <div class="col-md-3">
          <label>Modelo</label>
          <input type="text" class="form-control" name="modelo" required>
        </div>
        <div class="col-md-2">
          <label>Ano</label>
          <input type="number" class="form-control" name="ano" required>
        </div>
        <div class="col-md-2">
          <label>Fabricante</label>
          <select name="maker_id" class="form-select" required>
            <option value="">Selecione</option>
            {% for maker in makers %}
              <option value="{{ maker.id }}">{{ maker.fabricante }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-2">
          <label>Imagem (URL)</label>
          <input type="text" class="form-control" name="image">
        </div>
      </div>
      <button type="submit" class="btn btn-success mt-3">Salvar</button>
    </form>
  </div>

  <!-- Lista -->
  <div class="row">
    {% for modelo in modelos.items %}
      <div class="col-md-3 mb-4">
        <div class="card h-100">
          <img src="{{ modelo.image }}" class="card-img-top" alt="{{ modelo.modelo }}">
          <div class="card-body">
            <h5 class="card-title">{{ modelo.marca }} - {{ modelo.modelo }}</h5>
            <p class="card-text">Ano: {{ modelo.ano }}</p>
            <p class="card-text">Fabricante: {{ modelo.maker_ref.fabricante }}</p>
          </div>
          <div class="card-footer text-center">
            <a href="{{ url_for('editar_modelo', id=modelo.id) }}" class="btn btn-warning btn-sm">Editar</a>
            <a href="{{ url_for('modelos', id=modelo.id) }}" class="btn btn-danger btn-sm">Excluir</a>
          </div>
        </div>
      </div>
    {% else %}
      <p>Nenhum modelo encontrado.</p>
    {% endfor %}
  </div>
  <nav>
    <ul class="pagination justify-content-center">
      {% if modelos.has_prev %}
        <li class="page-item"><a class="page-link" href="?page={{ modelos.prev_num }}">Anterior</a></li>
      {% endif %}
      <li class="page-item disabled"><a class="page-link">Página {{ modelos.page }} de {{ modelos.pages }}</a></li>
      {% if modelos.has_next %}
        <li class="page-item"><a class="page-link" href="?page={{ modelos.next_num }}">Próxima</a></li>
      {% endif %}
    </ul>
  </nav>
{% endblock content %}